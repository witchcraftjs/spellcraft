<!DOCTYPE html><html class="default" lang="en" data-base="../"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>safeSetManagerChain | @witchcraft/spellcraft</title><meta name="description" content="Documentation for @witchcraft/spellcraft"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="../index.html" class="title">@witchcraft/spellcraft</a><div id="tsd-toolbar-links"><a href="https://github.com/witchcraftjs/spellcraft">Github</a><a href="https://github.com/witchcraftjs/spellcraft/issues">Issues</a><a href="http://npmjs.com/@witchcraft/spellcraft">npm</a></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb" aria-label="Breadcrumb"><li><a href="../modules/helpers_safeSetManagerChain.html">helpers/safeSetManagerChain</a></li><li><a href="" aria-current="page">safeSetManagerChain</a></li></ul><h1>Function safeSetManagerChain</h1></div><section class="tsd-panel"><ul class="tsd-signatures"><li class=""><div class="tsd-signature tsd-anchor-link" id="safesetmanagerchain"><span class="tsd-kind-call-signature">safeSetManagerChain</span><span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">manager</span><span class="tsd-signature-symbol">:</span> <a href="../types/types_manager.Manager.html" class="tsd-signature-type tsd-kind-type-alias">Manager</a><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-kind-parameter">chain</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-kind-parameter">__namedParameters</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-symbol">{</span> <span class="tsd-kind-property">preserveModifiers</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">boolean</span> <span class="tsd-signature-symbol">}</span><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Result</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">,</span> <a href="../classes/helpers_KnownError.KnownError.html" class="tsd-signature-type tsd-kind-class">KnownError</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">&quot;UNKNOWN_KEY&quot;</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span><a href="#safesetmanagerchain" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Safely sets the manager's chain.</p>
<p>Note that it might seem to do odd things to keep the state consistant and prevent us from getting into invalid states or triggering shorcuts when we shouldn't. Some of these include:
- If the new chain would trigger a shortcut, the shortcut will be synthetically triggered with a keyup.
- If the manager is Manager.state.isAwaitingKeyup to trigger anything (Manager.state.untrigger), the shortcut will be synthetically triggered with a keyup.
- If there are still non-modifier keys being pressed, the manager will wait until they are all released before allowing keys to be added to the chained again.
- Modifiers will stay in the first chord if they are still being pressed according to Key.press. This makes it possible for the user to trigger multiple shortcuts without releasing a modifier.  This can result in potentially strange behavior for shortcuts longer than one chord, as further chords can be started without releasing the modifiers. If you don't like this, you can pass <code>{preserveModifiers: false}</code> to force the user to release the modifiers.
- If there are still modifier keys being pressed, the manager will add them to the last chord, unless you pass <code>preserverModifiers: false</code>.
- **If keys are currently being held (Key.pressed is true), note that the manager's state and the key state state may not match. This is usually not a problem with normal key presses, but... **
- If using virtualPress/virtualToggle, the keys might remain pressed, potentially causing issues. In those cases you can use the <a href="../types/types_manager.Manager.html#listener" class="tsd-kind-property">Manager.listener</a> to keep track of whether keys are virtually pressed or not (virtually pressed keys have no events), and unpress the ones you should.
- Setting a <code>[]</code> chain is slightly different than setting a <code>[[]]</code> chain to keep the behavior of the manager consistent on the next key press.
- When you set <code>[]</code>, the function will also set Manager.state.nextIsChord to <code>true</code>, so it knows to insert a chord on the next key press.
- When you set <code>[[]]</code>, it will set it to <code>false</code>, since the chord already exists.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">manager</span>: <a href="../types/types_manager.Manager.html" class="tsd-signature-type tsd-kind-type-alias">Manager</a></span></li><li><span><span class="tsd-kind-parameter">chain</span>: <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">[]</span></span></li><li><span><span class="tsd-kind-parameter">__namedParameters</span>: <span class="tsd-signature-symbol">{</span> <span class="tsd-kind-property">preserveModifiers</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">boolean</span> <span class="tsd-signature-symbol">}</span><span class="tsd-signature-symbol"> = {}</span></span></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Result</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">string</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">,</span> <a href="../classes/helpers_KnownError.KnownError.html" class="tsd-signature-type tsd-kind-class">KnownError</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">&quot;UNKNOWN_KEY&quot;</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></h4><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/witchcraftjs/spellcraft/blob/237048a625505745ae39f748e230d961ac39d113/src/helpers/safeSetManagerChain.ts#L29">src/helpers/safeSetManagerChain.ts:29</a></li></ul></aside></div></li></ul></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://github.com/witchcraftjs/spellcraft" class="tsd-nav-link">Github</a><a href="https://github.com/witchcraftjs/spellcraft/issues" class="tsd-nav-link">Issues</a><a href="http://npmjs.com/@witchcraft/spellcraft" class="tsd-nav-link">npm</a></nav><nav class="tsd-navigation"><a href="../modules.html">@witchcraft/spellcraft</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
